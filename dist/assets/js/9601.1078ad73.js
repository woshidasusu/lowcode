"use strict";(self["webpackChunklowcode"]=self["webpackChunklowcode"]||[]).push([[9601],{38615:function(t,e,s){function a(t=""){const e=document.createElement("textarea");e.style.position="absolute",e.style.bottom=0,e.style.left=0,e.style.opacity=0,document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}s.d(e,{Q:function(){return a}})},79601:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout-container"},[e("div",{staticStyle:{"margin-bottom":"20px"}},[e("span",{staticClass:"title"},[t._v(t._s(t.title||"元数据"))]),e("div",{staticStyle:{"margin-left":"20px"}},[e("el-button",{attrs:{type:"text"},on:{click:t.getCode}},[t._v("生成前端元数据代码")]),e("el-button",{attrs:{type:"text"},on:{click:t.doCopy}},[t._v("复制")]),"local"===t.type?e("el-button",{attrs:{type:"text"},on:{click:t.doTransform}},[t._v("格式转换成 JSON 字符串（提供给后端去写 sql 更新服务端元数据）")]):t._e()],1)]),e("div",{staticClass:"code"},[t._v(t._s(t.metadata))])])},o=[],n=s(38615),i={components:{},props:{},data(){return{type:"local",title:"",metadata:""}},computed:{},watch:{},async mounted(){const t=this.$route.query?.type;this.type=t;let e=localStorage.getItem("__metadata");e=JSON.parse(e),"local"===t?(this.title="本地元数据",this.metadata=JSON.stringify(e?.metadata," ",2)):"remote"===t&&(this.title="服务器元数据",this.metadata=JSON.stringify(JSON.parse(e?.standard)," ",2))},destroyed(){},methods:{getCode(){let t="/**\n* 可以通过运行 npm run dev-config-form，在配置化平台上可视化拖拽，也可手动维护";t+="\n* 提供给后端时，需先把数据转成标准 json，再序列化成字符串，不清楚可以直接在配置化平台上操作",t+="\n*/\n",t+="export default ",(0,n.Q)(t+this.metadata),this.$message.success("代码生成并复制成功")},doCopy(){(0,n.Q)(JSON.stringify(JSON.parse(this.metadata))),this.$message.success("复制成功")},doTransform(){let t=JSON.stringify(JSON.stringify(JSON.parse(this.metadata)));t=`'${t.substring(1,t.length-1)}'`,(0,n.Q)(t),this.$message.success("格式转换并复制成功")}}},c=i,l=s(9512),r=(0,l.Z)(c,a,o,!1,null,"72c566cc",null),d=r.exports}}]);