"use strict";(self["webpackChunklowcode"]=self["webpackChunklowcode"]||[]).push([[6443],{36443:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("el-form-item",{attrs:{label:e.formTemplate.label,prop:e.parentModelName+e.formTemplate.name,"label-width":e.formTemplate.labelWidth,required:!!+e.formTemplate.required,rules:[...e.formTemplate.validateRules||[],{type:"array",required:!!+e.formTemplate.required,message:e.formTemplate.label+"不能为空"}]}},[t("el-checkbox-group",e._g({attrs:{disabled:!!+e.formTemplate.disabled,"cancel-confirm":!!+e.formTemplate.cancelConfirm},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e.onEvents),e._l(e.options,(function(a,o){return t("el-checkbox",{key:o,attrs:{label:a[e.fieldConfig.value]||a[e.fieldConfig.key],disabled:!!+a.disabled}},[e._v(" "+e._s(a[e.fieldConfig.key])+" ")])})),1),e.formTemplate.tip?t("span",{staticClass:"tip-text"},[e._v(e._s(e.formTemplate.tip))]):e._e()],1)},r=[];const i=window.__debug_log__,s=(...e)=>{i&&console.log("[checkboxGroup]：",...e)};var l={components:{},inject:["getStore"],props:{metadata:{type:Object,require:!0},formModel:{type:Object,default:()=>({})},parentModelName:{type:String,default:""}},data(){return{options:[],defaultFieldConfig:{key:"label",value:"value"},text:[],insideModel:[]}},computed:{formTemplate(){return this.metadata||{}},fieldConfig(){return this.metadata&&this.metadata.dataSource&&this.metadata.dataSource.fieldConfig||this.defaultFieldConfig},model:{get(){return this.formTemplate.name?this.formModel[this.formTemplate.name]:this.insideModel},set(e){this.formTemplate.name&&(this.formModel[this.formTemplate.name]=e),this.insideModel=e}},coreProcessor(){return this.getStore()?.state()?.coreProcessor},onEvents(){const e={};return this.metadata?._id&&(e.change=this.handleEvent.bind(this,"change",this.metadata._id),this.metadata?.$on?.forEach((t=>{e[t]=this.handleEvent.bind(this,t,this.metadata._id)}))),e}},watch:{metadata:{handler:function(e){this.parseMetadata()},immediate:!0},"metadata.dataSource":{handler:async function(e,t){const a=await this.coreProcessor.parseDataSource(e);this.options=a||[]}}},methods:{async parseMetadata(){if(!this.validateMetadata())return;s("validateMetadata() return true");const{dataSource:e}=this.metadata;this.options=await this.coreProcessor.parseDataSource(e),this.options=this.options||[]},validateMetadata(){if(!this.metadata||"object"!==typeof this.metadata)return!1;const{dataSource:e}=this.metadata;return!(!e||"object"!==typeof e)||(console.error("checkboxGroup 表单组件的 dataSource 字段不能为空"),!1)},handleEvent(e,t,a){this.$emit("event",e,t,a)}}},n=l,d=a(9512),m=(0,d.Z)(n,o,r,!1,null,"90c13b52",null),c=m.exports}}]);