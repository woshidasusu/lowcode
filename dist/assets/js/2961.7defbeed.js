"use strict";(self["webpackChunklowcode"]=self["webpackChunklowcode"]||[]).push([[2961],{22961:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var o=function(){var t=this,e=t._self._c;return e("el-form-item",{class:t.formTemplate.class,attrs:{prop:t.parentModelName+t.formTemplate.name,required:!!+t.formTemplate.required,rules:[...t.formTemplate.validateRules||[],{required:!!+t.formTemplate.required,message:t.formTemplate.label+"不能为空"}]}},[e("template",{slot:"label"},[t._v(" "+t._s(t.formTemplate.label)+" "),+t.formTemplate.isExplain?e("el-tooltip",{attrs:{effect:"light",placement:"top"}},[e("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.formTemplate.isExplainTip)},slot:"content"}),+t.formTemplate.isExplain?e("img",{staticStyle:{width:"16px"},attrs:{src:t.explainUrl,alt:""}}):t._e()]):t.formTemplate.labelTooltip?[e("el-tooltip",t._b({},"el-tooltip",t.formTemplate.labelTooltip.$props,!1),[t.formTemplate.labelTooltip.tips?e("div",{attrs:{slot:"content"},slot:"content"},t._l(t.formTemplate.labelTooltip.tips,(function(a,o){return e("p",{key:o},[t._v(t._s(a))])})),0):t._e(),e("img",{staticStyle:{width:"16px"},attrs:{src:t.explainUrl,alt:""}})])]:t._e()],2),e("el-radio-group",t._g({attrs:{disabled:!!+t.formTemplate.disabled},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t.onEvents),t._l(t.options,(function(a,o){return e("el-radio",{key:o,attrs:{label:a[t.fieldConfig.value],disabled:!!+a.disabled}},[t._v(" "+t._s(a[t.fieldConfig.key])+" ")])})),1)],2)},i=[];const l=window.__debug_log__,r=(...t)=>{l&&console.log("[radioGroup]：",...t)};var s={components:{},inject:["getStore"],props:{metadata:{type:Object,require:!0},formModel:{type:Object,default:()=>({})},parentModelName:{type:String,default:""}},data(){return{options:[],defaultFieldConfig:{key:"label",value:"value"},insideModel:[],explainUrl:""}},computed:{formTemplate(){return this.metadata||{}},fieldConfig(){return this.metadata&&this.metadata.dataSource&&this.metadata.dataSource.fieldConfig||this.defaultFieldConfig},model:{get(){return this.formTemplate.name?this.formModel[this.formTemplate.name]:this.insideModel},set(t){this.formTemplate.name&&(this.formModel[this.formTemplate.name]=t),this.insideModel=t}},coreProcessor(){return this.getStore()?.state()?.coreProcessor},onEvents(){const t={};return this.metadata?._id&&(t.change=this.handleEvent.bind(this,"change",this.metadata._id),this.metadata?.$on?.forEach((e=>{t[e]=this.handleEvent.bind(this,e,this.metadata._id)}))),t}},watch:{metadata:{handler:function(t){this.parseMetadata()},immediate:!0},"metadata.dataSource":{handler:async function(t,e){const a=await this.coreProcessor.parseDataSource(t);this.options=a||[],this.defaultFirstOption()}}},methods:{async parseMetadata(){if(!this.validateMetadata())return;r("validateMetadata() return true");const{dataSource:t}=this.metadata;this.options=await this.coreProcessor.parseDataSource(t),this.options=this.options||[],this.defaultFirstOption()},validateMetadata(){if(!this.metadata||"object"!==typeof this.metadata)return!1;const{dataSource:t}=this.metadata;return!(!t||"object"!==typeof t)||(console.error("radioGroup 表单组件的 dataSource 字段不能为空"),!1)},handleEvent(t,e,a){this.$emit("event",t,e,a)},defaultFirstOption(){if(+this.formTemplate.isSelectFirst&&!this.model&&this.options?.length){const t=this.formTemplate.dataSource?.fieldConfig?.value||"value";this.model=this.options[0][t]}}}},n=s,d=a(9512),m=(0,d.Z)(n,o,i,!1,null,"4aba452c",null),p=m.exports}}]);